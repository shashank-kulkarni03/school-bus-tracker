(function () {
  var e = L.Routing,
    t = L.extend({}, L.Evented.prototype);
  L.Routing.openrouteservice = function (t) {
    var r = function (e, t) {
      return new Promise(function (r, n) {
        var o = "https://api.openrouteservice.org/v2/directions/driving-car",
          i = t.options || {},
          a = {
            coordinates: e.map(function (e) {
              return [e.lng, e.lat];
            }),
          };
        fetch(o, {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            Authorization: t.apiKey,
          },
          body: JSON.stringify(a),
        })
          .then(function (e) {
            return e.json();
          })
          .then(function (n) {
            if (n.error) {
              return void r({ error: n.error.message });
            }
            var o = n.features[0].geometry.coordinates.map(function (e) {
              return L.latLng(e[1], e[0]);
            });
            r({ coordinates: o });
          });
      });
    };
    return (
      (t = L.extend({}, t)),
      L.extend(t, t || {}),
      L.extend(t, {
        route: function (n, o) {
          var i = this;
          r(n, t)
            .then(function (t) {
              if (t.error) return o(t.error);
              o(null, {
                name: "OpenRouteService route",
                coordinates: t.coordinates,
                instructions: [],
              });
            })
            .catch(function (e) {
              o(e);
            });
        },
      }),
      t
    );
  };
  L.Routing.OpenRouteService = L.Routing.openrouteservice;
})();
